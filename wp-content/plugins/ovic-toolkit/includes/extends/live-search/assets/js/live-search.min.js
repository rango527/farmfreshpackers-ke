(function(a){var b=(function(){var c=0;return function(d,e){clearTimeout(c);c=setTimeout(d,e)}})();a(document).ready(function(){setTimeout(function(){a(document).on(" keyup",".ovic-live-search-form .txt-livesearch",function(d){var c=a(this);b(function(){var e=c.closest(".ovic-live-search-form"),g=d.keyCode,i=e.find(".products-search .product-search"),h=c.val(),j=a(this).closest(".ovic-live-search-form").find('select[name="product_cat"]').val();if(typeof j==="undefined"||j==0){j=""}if(h.length<ovic_ajax_live_search.ovic_live_search_min_characters){return false}var f={action:"ovic_live_search",security:ovic_ajax_live_search.security,keyword:h,product_cat:j};e.addClass("loading");a.post(ovic_ajax_live_search.ajaxurl,f,function(k){e.removeClass("loading");e.find(".suggestion-search-data").remove();e.find(".not-results-search").remove();e.find(".products-search").remove();if(k.message){e.find(".results-search").append('<div class="not-results-search">'+k.message+"</div>")}else{e.find(".results-search").append('<div class="products-search"></div>');if(k.suggestion){e.find(".results-search").append('<div class="suggestion-search suggestion-search-data">'+k.suggestion+"</div>")}a.each(k.list_product,function(l,m){e.find(".products-search").append('<div class="product-search-item"><div class="product-image">'+m.image+'</div><div class="product-title-price"><div class="product-title"><a class="mask-link" href="'+m.url+'">'+m.title.replace(new RegExp("("+h+")","ig"),'<span class="keyword-current">$1</span>')+'</a></div><div class="product-price">'+m.price+"</div></div></div>")});e.find(".products-search").append('<div class="product-search view-all button">'+ovic_ajax_live_search.view_all_text+"</div>")}})},1000)});a("body").on("click",".ovic-live-search-form .view-all",function(){var c=a(this);var d=c.closest(".ovic-live-search-form ").submit()});a(document).click(function(d){var c=a(d.target).closest(".ovic-live-search-form");if(!c.length){a(".ovic-live-search-form .products-search").stop().hide();a(".ovic-live-search-form .not-results-search").stop().hide()}else{a(".ovic-live-search-form .products-search").stop().show();a(".ovic-live-search-form .not-results-search").stop().show()}})},1)})})(jQuery);