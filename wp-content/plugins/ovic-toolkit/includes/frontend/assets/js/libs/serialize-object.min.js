!function(i,e){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(i,t){return e(i,t)});else if("undefined"!=typeof exports){var t=require("jquery");e(exports,t)}else e(i,i.jQuery||i.Zepto||i.ender||i.$)}(this,function(i,e){function t(i,t){function o(i,e,t){return i[e]=t,i}function n(i,e){for(var t,n=i.match(s.key);void 0!==(t=n.pop());)if(s.push.test(t)){var l=r(i.replace(/\[\]$/,""));e=o([],l,e)}else s.fixed.test(t)?e=o([],t,e):s.named.test(t)&&(e=o({},t,e));return e}function r(i){return void 0===h[i]&&(h[i]=0),h[i]++}function l(i){switch(e('[name="'+i.name+'"]',t).attr("type")){case"checkbox":return"on"===i.value?!0:i.value;default:return i.value}}function a(e){if(!s.validate.test(e.name))return this;var t=n(e.name,l(e));return u=i.extend(!0,u,t),this}function d(e){if(!i.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var t=0,s=e.length;s>t;t++)this.addPair(e[t]);return this}function c(){return u}function p(){return JSON.stringify(c())}var u={},h={};this.addPair=a,this.addPairs=d,this.serialize=c,this.serializeJSON=p}var s={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return t.patterns=s,t.serializeObject=function(){return new t(e,this).addPairs(this.serializeArray()).serialize()},t.serializeJSON=function(){return new t(e,this).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof e.fn&&(e.fn.serializeObject=t.serializeObject,e.fn.serializeJSON=t.serializeJSON),i.FormSerializer=t,t});